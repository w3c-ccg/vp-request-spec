<!DOCTYPE html>
<html>
  <head>
    <title>Verifiable Presentation Request Specification v0.1</title>
    <meta http-equiv='Content-Type' content='text/html;charset=utf-8'/>
    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common' class='remove'></script>
    <script src="./common.js" class="remove"></script>
    <script type="text/javascript" class="remove">
      var respecConfig = {
        // specification status (e.g., WD, LCWD, NOTE, etc.). If in doubt use ED.
        specStatus: "CG-DRAFT",

        // the specification's short name, as in http://www.w3.org/TR/short-name/
        shortName: "vp-request-spec",

        // subtitle for the spec
        subtitle: "",

        // if you wish the publication date to be other than today, set this
        //publishDate: "",
        //crEnd: "",
        //prEnd: "",
        //implementationReportURI: "",

        // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
        // and its maturity status
        // previousPublishDate:  "1977-03-15",
        // previousMaturity:  "WD",

        // extend the bibliography entries
        localBiblio: ccg.localBiblio,
        doJsonLd: true,

        github: "https://github.com/w3c-ccg/vp-request-spec/",
        includePermalinks: false,

        // if there a publicly available Editor's Draft, this is the link
        edDraftURI: "https://w3c-ccg.github.io/vp-request-spec/",

        // if this is a LCWD, uncomment and set the end of its review period
        // lcEnd: "2009-08-05",

        // editors, add as many as you like
        // only "name" is required
        editors: [
          { name: "Dave Longley", url: "https://github.com/dlongley",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/"},
          { name: "Mike Varley",
              company: "Secure Key", companyURL: "https://securekey.com/"},
          { name: "Dmitri Zagidulin", url: "https://www.linkedin.com/in/dzagidulin/",
            company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/"}
        ],
        // authors, add as many as you like.
        // This is optional, uncomment if you have authors as well as editors.
        // only "name" is required. Same format as editors.
        authors:
        [
          // { name: "Dave Longley", url: "https://digitalbazaar.com/",
          //   company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/"},
          // { name: "Manu Sporny", url: "https://digitalbazaar.com/",
          //   company: "Digital Bazaar", companyURL: "https://digitalbazaar.com/" }
        ],
        // name of the WG
        wg:           "W3C Credentials Community Group",

        // URI of the public WG page
        wgURI:        "https://w3c-ccg.github.io/",

        // name (with the @w3c.org) of the public mailing to which comments are due
        wgPublicList: "public-credentials",

        // URI of the patent status for this WG, for Rec-track documents
        // !!!! IMPORTANT !!!!
        // This is important for Rec-track documents, do not copy a patent URI from a random
        // document unless you know what you're doing. If in doubt ask your friendly neighborhood
        // Team Contact.
        wgPatentURI:  "https://www.w3.org/2004/01/pp-impl/98922/status",
        maxTocLevel: 2,
        inlineCSS: true
      };
    </script>
    <style>
pre .highlight {
  font-weight: bold;
  color: Green;
}
pre .subject {
  font-weight: bold;
  color: RoyalBlue;
}
pre .property {
  font-weight: bold;
  color: DarkGoldenrod;
}
pre .comment {
  font-weight: bold;
  color: SteelBlue;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.color-text {
  font-weight: bold;
  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
}
    </style>
  </head>
  <body>
    <section id='abstract'>
      <p>
This specification describes a declarative JSON-based query language used by
applications to perform requests from wallets and agents. The results of the
requests are always wrapped in a Verifiable Presentation.
      </p>
    </section>

    <section id='sotd'>
      <p>
This draft highlights some of the pending issues that are still to be discussed
in the community group. No decision has been taken on the outcome of these
issues including whether they are valid. Pull requests with proposed
specification text for outstanding issues are strongly encouraged.
      </p>
    </section>

    <section class="informative">
      <h2>Introduction</h2>

      <p>
When working with Verifiable Credentials, Decentralized Identifier (DID) based
Authentication, and Authorization Capabilities, a client application often needs
to request credential-related objects from a wallet or agent. This document
presents a specification that describes the format of those requests.
      </p>

      <p>
Note: This specification is unstable at present, and only reflects an effort to
get initial interop working, for incubation and implementation experience.
Additionally, the intention is to align this spec and the query format to
fit into/work with other protocols/messaging formats such as DIDComm.
      </p>

    </section>

    <section class="normative">
      <h2 id="format">Request Overview</h2>

      <p>
To make a request for one or more objects wrapped in a Verifiable Presentation,
a <a>client</a> constructs a JSON request describing one or more queries that
it wishes to perform from the receiver.
      </p>

      <pre class="example nohighlight" title="A sample query">
{
  query: [{
    type: 'APopularQueryType',
    // query details ...
  }, {
    type: 'AnotherQueryType',
    // query details ...
  }],

  // Challenge that will be digitally signed in the authentication proof
  // that will be attached to the VerifiablePresentation response
  challenge, // Required
  recipients: [
    // an optional key agreement key for encrypting the response if
    // this is supported
  ]
}
      </pre>

    </section>

    <section class="normative">
      <h2 id="format">Query Types</h2>

      <p>
The <a>query type</a> serves as the main extension point mechanism for
requests for data in the presentation. This document defines several common query
types.
      </p>

      <section>
        <h3>Query By Example</h3>

        <pre class="example nohighlight" title="A Query By Example query">
{
  "query": [
    {
      "type": "QueryByExample",
      "credentialQuery": [
        {
          // One or more example query entries
          "required": false, // (Optional) Defaults to 'true' if omitted
          // (Optional) Reason for requesting this credential that
          // may be shown to a user by their wallet software
          "reason": "We need you to prove your eligibility to work.",
          "example": {
            "@context": ["https://www.w3.org/2018/credentials/v1", "https://w3id.org/citizenship/v1"],
            "type": "PermanentResidentCard",
            // (Optional) You can request a specific subject id
            "credentialSubject": {
              "id": "...",
              "name": "..."
            },
            // (Optional) Specify only credentials of a particular schema
            "credentialSchema": {
              "id": "urn:foo:1234",
              "type": "SomeType"
            },
            // (Optional) Specify credentials from a particular issuer only
            "trustedIssuer": [
              {
                "required": true,
                "issuer": "urn:some:required:issuer"
              }
            ],
            // (Optional)
            "issuerQuery": [
              //
            ]
          }
        },
        {
          // Another example query
          "type": "AnotherQueryType"
          // ...
        }
      ]
    }
  ],
  "challenge": "3182bdea-63d9-11ea-b6de-3b7c1404d57f",
  // the domain that will be digitally signed in the authentication
  // proof that will be attached to the VerifiablePresentation
  // response, identifying the recipient
  "domain": "jobs.example.com"
}
        </pre>
      </section>

      <section>
        <h3>Query By Frame</h3>
        <pre class="example nohighlight" title="A request for Query By Frame">
{
  "query": [{
    "type": "QueryByFrame",
    "credentialQuery": [{
      "reason": "Wallet XYZ is ready to selectively disclose new credentials.",
      "frame": { ... }
    }],
  }]
}
        </pre>

        <pre class="example nohighlight" title="A query by frame from a verifier">
          {
            "query": [
              {
                "type": "QueryByFrame",
                "credentialQuery": {
                  "frame": {
                    "@context": [
                      "https://www.w3.org/2018/credentials/v1",
                      "https://w3id.org/vaccination/v1",
                      "https://w3id.org/security/suites/bls12381-2020/v1"
                    ],
                    "type": ["VerifiableCredential", "VaccinationCertificate"],
                    "credentialSubject": {
                      "@explicit": true,
                      "type": ["VaccinationEvent"],
                      "batchNumber": {},
                      "countryOfVaccination": {}
                    }
                  }
                }
              }
            ],
            "domain": "jobs.example.com",
            "challenge": "3182bdea-63d9-11ea-b6de-3b7c1404d57f"
          }          
        </pre>
      </section>

      <section>
        <h3>DID Authentication Request</h3>

        <pre class="example nohighlight" title="A DIDAuth request">
{
  query: [{
    type: 'DIDAuth'
  }],
  challenge: '99612b24-63d9-11ea-b99f-4f66f3e4f81a',
  domain: 'example.com'
}
        </pre>

        <p>Response:</p>

        <pre class="example nohighlight" title="A DIDAuth response">
{
  "@context": ["https://www.w3.org/2018/credentials/v1"],
  "type": "VerifiablePresentation",
  "holder": "did:example:12345",
  "proof": {
    "proofPurpose": "authentication",
    "type": "Ed25519Signature2018",
    "challenge": "99612b24-63d9-11ea-b99f-4f66f3e4f81a",
    "domain": "example.com",
    "created": "2020-06-06T21:05:13Z",
    "verificationMethod": "did:example:12345#z6Mkkg...",
    "jws": "..."
  }
}
        </pre>
      </section>

      <section>
        <h3>Authorization Capability Request</h3>

        <p>
This query type would be included in a request to ask for Authorization
Capabilities or "zcaps" in the Verifiable Presentation.
        </p>

        <pre class="example nohighlight" title="A zCap Request query">
{
  query: [{
    type: 'ZcapQuery',
    capabilityQuery: [{
      referenceId: `a-memorable-name`,
      allowedAction: ['read', 'write'],
      invoker: 'did:key:1234',
      delegator: 'did:key:1234'
      invocationTarget: {
        type: 'urn:edv:documents'
      }
    }, {
      referenceId: `another-memorable-name`,
      allowedAction: 'sign',
      invoker: 'did:key:1234',
      delegator: 'did:key:1234',
      invocationTarget: {
        type: 'Ed25519VerificationKey2018',
        proofPurpose: 'assertionMethod'
      }
    }],
    challenge: '111112b24-63d9-11ea-b99f-4f66f3e4f81a'
  }]
}
        </pre>
      </section>

    </section>

    <section class="normative">
      <h2 id="format">Usage Scenarios</h2>

      <p>
This request query format is intended to be used in a variety of protocols and
usage scenarios.
      </p>

      <section class="informative">
        <h3>Browser - Credential Handler API (CHAPI)</h3>

        <p>
The <a href="https://w3c-ccg.github.io/credential-handler-api/">Credential
Handler API (CHAPI)</a> specification enables in-browser Javascript applications
to communicate with wallet providers for the purpose of issuing Verifiable
Credentials and requesting Verifiable Presentations. Interested implementers are
encouraged to look at the <a
href="https://github.com/digitalbazaar/credential-handler-polyfill">Credential
Handler Polyfill</a> repository for further discussion and examples.
        </p>

        <p>
        CHAPI is an extension of the
        <a href="https://www.w3.org/TR/credential-management-1/">Credential
        Management API</a>, and includes the following:

        <ul>
          <li><code>navigator.credentials.get(request)</code></li>
          <li><code>navigator.credentials.store(request)</code></li>
        </ul>
        </p>

        <p>
A VerifiablePresentation is used to both store or present VerifiableCredentials.
When storing a VerifiableCredential, the VerifiablePresentation does not need to
be signed.
        </p>

        <section class="informative">
          <h4>WebCredential</h4>

          <p>
CHAPI provides a single derived class, the <code>WebCredential</code> that forms
the basis for any sort of credential data that is provided over the Web, i.e.,
via a "Credential Handler" that a origin has registered in the user's browser
when the user visited that origin's website.
          </p>

          <pre class="example nohighlight" title="Creating a WebCredential instance.">
const webCredential = new WebCredential('VerifiablePresentation', {
  '@context': 'https://www.w3.org/2018/credentials/v1',
  ...presentation
});
          </pre>
        </section>

        <section class="informative">
          <h4>Requesting and Storing Credentials</h4>

          <p>
Using CHAPI, a web application can <code>get()</code> and <code>store()</code>
credentials without knowing anything about the user's wallet. This is
intentional; for privacy reasons, the client app must not be able to query any
information (without user consent) about which wallets or credential handlers a
user may have installed (otherwise, fingerprinting and other attacks would be
possible).
          </p>

          <h4>get()</h4>

          <p>
A web app (a Relying Party or verifier) can request a credential using
<code>credentials.get()</code> during a user gesture event, for example when
the user pushes a button on a page that requires identity attributes or
authentication.
          </p>

          <pre class="example nohighlight" title="Example get() request.">
const credentialQuery = {
  web: {
    VerifiablePresentation: {
      query: {
        type: 'QueryByExample',
        credentialQuery: {
          // an optional reason for requesting this credential that
          // may be shown to a user by their wallet software
          reason: 'We need you to prove your eligibility to work.',
          example: {
            '@context': [
              'https://www.w3.org/2018/credentials/v1',
              'https://w3id.org/citizenship/v1'
            ],
            type: 'PermanentResidentCard'
          }
        }
      },
      // a 128-bit randomly generated value encoded as a string (use a UUID);
      // it will be digitally signed in the authentication proof
      // that will be attached to the VerifiablePresentation response
      challenge: '3182bdea-63d9-11ea-b6de-3b7c1404d57f',
      // the domain that must be digitally signed in the authentication
      // proof that will be attached to the VerifiablePresentation
      // response, identifying the recipient
      domain: 'jobs.example.com'
    }
  }
};
const webCredential = await navigator.credentials.get(credentialQuery);

if(!webCredential) {
  console.log('no presentation received');
}

// Response:

null // if the user cancels

// or a WebCredential with these attributes/values:
{
  "type": "web",
  "dataType": "VerifiablePresentation",
  "data": {
    // Verifiable Presentation goes here, containing the credentials
    // that the user agreed to share, or `null` if the user canceled
  }
}

const {data: presentation} = webCredential;
// send `presentation` to server for forwarding to verifier API
          </pre>


          <h4>store()</h4>

          <p>
A web app (for example, a credential issuer such as a university or institution)
can ask to store a credential during a user gesture event, for example when the
user pushes a button to receive a credential.
          </p>

          <pre class="example nohighlight" title="Requesting via get().">
const result = await navigator.credentials.store(webCredential);
if(!result) {
  console.log('store credential operation canceled');
}

// Response:

null // if the user cancels

// or a WebCredential with these attributes/values:
{
  "type": "web",
  "dataType": "VerifiablePresentation",
  "data": {
    // Verifiable Presentation goes here, containing the credentials
    // that the user agreed to store
  }
}
          </pre>

        </section>
      </section>

      <section class="informative">
        <h3>Mobile Applications</h3>

        <p>
        </p>
        
      </section>

      <section class="informative">
        <h3>Peer to Peer</h3>

        <section class="informative">
          <h3>Machine to Machine</h3>
          
          <p>These APIs do not require browser polyfills and can be used with or
             without channel authorization schemes such as access tokens provided by OAuth 2.0 Client Credentials.</p>

          <section class="informative">
            <h3>Step 1: Notification Request</h3>
            <p>A presentation exchange workflow starts when a holder notifies a verifier of an intent to present credentials.</p>
            <p>This is the begining of a 1-1 workflow between a holder and a verifier, 
              where a holder notifies the verify what they indend to present,
            and the verifier queries the holder for specific credentials that will satisfy the verifier for the given request.</p>

            <pre class="example nohighlight" title="A manufacturer intends to submit trade data to US Customs.">
{
  "query":
    [
      {
        "type": "RequestQueryByExample",
        "credentialQuery":
          [
            {
              "type":
                [
                    "VerifiableCredential",
                    "MillTestReportCertificate",
                ],
              "reason": "Acme Steel Inc. is ready to present certificate of origin for a steel import.",
            },
          ],
      },
    ],
}
            </pre>
          </section>

          <section class="informative">
            <h3>Step 2: Notification Response</h3>
            <p>A verifier responds with a <a href="#query-by-example">QueryByExample</a> or a <a href="#query-by-frame">QueryByFrame</a></p>
<pre class="example nohighlight" title="A verifier (US Customs) requests auxillary credentials.">
  {
    "query": [
      {
        "type": "QueryByExample",
        "credentialQuery": {
          "example": {
            "@context": [
              "https://www.w3.org/2018/credentials/v1",
              "https://w3id.org/traceability/v1"
            ],
            "type": ["VerifiableCredential", "MillTestReportCertificate", "CommercialInvoiceCertificate", "BillOfLadingCertificate"]
          }
        }
      }
    ],
    "domain": "customs.example.gov",
    "challenge": "3182bdea-63d9-11ea-b6de-3b7c1404d57f"
  }       
</pre>
          </section>
        </section>

        <section class="informative">
          <h3>Step 3: Presentation Submission</h3>
          <p>A holder completes the workflow they initiated by submitting a 
            <a href="https://www.w3.org/TR/vc-data-model/#presentations">Verifiable Presentation</a>
            over the challenge and optionally the domain obtained from Step 2.
          </p>
          <pre class="example nohighlight" title="A holder (Acme Steel Inc.) submits supply chain traceability credentials to a verifier that is a regulator (US Customs).">
            {
              "@context": [
                "https://www.w3.org/2018/credentials/v1",
                "https://w3id.org/traceability/v1"
              ],
              "id": "urn:uuid:07aa969e-b40d-4c1b-ab46-ded252003ded",
              "type": ["VerifiablePresentation"],
              "verifiableCredential": [
                {
                  "@context": [
                    "https://www.w3.org/2018/credentials/v1",
                    "https://w3id.org/traceability/v1"
                  ],
                  "id": "https://example.com/credential/123",
                  "type": ["VerifiableCredential", "MillTestReportCertificate"],
                  "name": "Certified Mill Test Report",
                  "description": "This document includes recommended mill certificate fields.",
                  "relatedLink": [
                    {
                      "type": ["LinkRole"],
                      "target": "https://www.example.com/template/123",
                      "linkRelationship": "templateLink"
                    }
                  ],
                  "issuanceDate": "2019-12-11T03:50:55Z",
                  "issuer": {
                    "id": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U",
                    "type": "Organization",
                    "name": "Bartell Inc",
                    "description": "Realigned maximized alliance",
                    "address": {
                      "type": "PostalAddress",
                      "streetAddress": "713 Funk Parkway",
                      "addressLocality": "Dannyside",
                      "addressRegion": "Alabama",
                      "postalCode": "17321",
                      "addressCountry": "Peru"
                    },
                    "email": "Dion_Stoltenberg@example.org",
                    "phoneNumber": "555-987-1014",
                    "faxNumber": "555-377-8843"
                  },
                  "credentialSubject": {
                    "type": ["MillTestReport"],
                    "manufacturer": {
                      "type": ["Organization"],
                      "name": "Pacocha Group",
                      "description": "Cross-group motivating open system",
                      "address": {
                        "type": ["PostalAddress"],
                        "streetAddress": "3076 Bernier Radial",
                        "addressLocality": "Lake Cora",
                        "addressRegion": "Arizona",
                        "postalCode": "54215-6259",
                        "addressCountry": "Sweden"
                      },
                      "email": "Ila_VonRueden14@example.net",
                      "phoneNumber": "555-378-2057",
                      "faxNumber": "555-317-8070"
                    },
                    "product": {
                      "type": ["SteelProduct"],
                      "heatNumber": "29493",
                      "specification": "ASTM-96405",
                      "grade": "1526",
                      "originalCountryOfMeltAndPour": "Bermuda",
                      "inspection": {
                        "type": ["InspectionReport"],
                        "observation": [
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["MechanicalProperty"],
                              "identifier": "ISO 148",
                              "name": "Charpy Impact Strength Test",
                              "description": "ISO 148-1:2016 specifies the Charpy (V-notch and U-notch) pendulum impact test method for determining the energy absorbed in an impact test of metallic materials. This part of ISO 148 does not cover instrumented impact testing, which is specified in ISO 14556."
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "38.844",
                              "unitCode": "B13"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["MechanicalProperty"],
                              "identifier": "ISO 148",
                              "name": "Charpy Impact Strength Test",
                              "description": "ISO 148-1:2016 specifies the Charpy (V-notch and U-notch) pendulum impact test method for determining the energy absorbed in an impact test of metallic materials. This part of ISO 148 does not cover instrumented impact testing, which is specified in ISO 14556."
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "33.743",
                              "unitCode": "B13"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["MechanicalProperty"],
                              "identifier": "ISO 3738",
                              "name": "Rockwell Hardness Test (Scale A)",
                              "description": "The Rockwell hardness test is an empirical indentation hardness test that can provide useful information about metallic materials."
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "00.00",
                              "unitCode": "UNKNOWN"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["MechanicalProperty"],
                              "identifier": "ISO 1352",
                              "name": "Torque-controlled fatigue testing",
                              "description": "ISO 1352:2011 specifies the conditions for performing torsional, constant-amplitude, nominally elastic stress fatigue tests on metallic specimens without deliberately introducing stress concentrations. The tests are carried out at ambient temperature (ideally at between 10 째C and 35 째C) in air by applying a pure couple to the specimen about its longitudinal axis."
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "00.00",
                              "unitCode": "UNKNOWN"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["ChemicalProperty"],
                              "name": "Zirconium"
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "60.811",
                              "unitCode": "P1"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["MechanicalProperty"],
                              "identifier": "ISO 1352",
                              "name": "Torque-controlled fatigue testing",
                              "description": "ISO 1352:2011 specifies the conditions for performing torsional, constant-amplitude, nominally elastic stress fatigue tests on metallic specimens without deliberately introducing stress concentrations. The tests are carried out at ambient temperature (ideally at between 10 째C and 35 째C) in air by applying a pure couple to the specimen about its longitudinal axis."
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "00.00",
                              "unitCode": "UNKNOWN"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["ChemicalProperty"],
                              "name": "Nitrogen"
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "00.00",
                              "unitCode": "UNKNOWN"
                            }
                          },
                          {
                            "type": ["Observation"],
                            "date": "2019-12-11T03:50:55Z",
                            "property": {
                              "type": ["ChemicalProperty"],
                              "name": "Astatine"
                            },
                            "measurement": {
                              "type": ["MeasuredValue"],
                              "value": "39.189",
                              "unitCode": "P1"
                            }
                          }
                        ]
                      }
                    },
                    "purchase": {
                      "type": ["Purchase"],
                      "customer": {
                        "type": ["Person"],
                        "email": "Triston.Wehner28@example.com",
                        "phoneNumber": "555-829-8193"
                      }
                    },
                    "shipment": {
                      "type": ["ParcelDelivery"],
                      "deliveryAddress": {
                        "type": ["PostalAddress"],
                        "organizationName": "Luettgen - Conn",
                        "streetAddress": "03845 Dylan Groves",
                        "addressLocality": "Wittingfurt",
                        "addressRegion": "Delaware",
                        "postalCode": "77015-3992",
                        "addressCountry": "Tuvalu"
                      },
                      "originAddress": {
                        "type": ["PostalAddress"],
                        "organizationName": "O'Hara, Klein and Ratke",
                        "streetAddress": "603 Jerde Curve",
                        "addressLocality": "Kubside",
                        "addressRegion": "Indiana",
                        "postalCode": "38144",
                        "addressCountry": "Isle of Man"
                      },
                      "deliveryMethod": "Rail freight transport",
                      "trackingNumber": "793845358389"
                    }
                  },
                  "proof": {
                    "type": "Ed25519Signature2018",
                    "created": "2019-12-11T03:50:55Z",
                    "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..eYAe3tnAYLhfE7tbW6nVUeQclF63oi2Y8JK1Y9U5VTXx4l0Zo1qcsefsZvuwj3AhNZ1OisIwyTD-BccnOiXcBA",
                    "proofPurpose": "assertionMethod",
                    "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                  }
                },
                {
                  "@context": [
                    "https://www.w3.org/2018/credentials/v1",
                    "https://w3id.org/traceability/v1"
                  ],
                  "id": "https://example.com/credential/123",
                  "type": ["VerifiableCredential", "CommercialInvoiceCertificate"],
                  "name": "Commercial Invoice Certificate",
                  "description": "This document includes recommended commercial invoice fields.",
                  "relatedLink": [
                    {
                      "type": ["LinkRole"],
                      "target": "https://www.example.com/template/123",
                      "linkRelationship": "templateLink"
                    },
                    {
                      "type": ["LinkRole"],
                      "target": "did:example:789",
                      "linkRelationship": "billOfLadingLink"
                    },
                    {
                      "type": ["LinkRole"],
                      "target": "https://www.example.com/credentials/123",
                      "linkRelationship": "millTestReportLink"
                    }
                  ],
                  "issuanceDate": "2019-12-11T03:50:55Z",
                  "issuer": {
                    "id": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U",
                    "type": "Organization",
                    "name": "Waters Inc",
                    "description": "Stand-alone executive benchmark",
                    "address": {
                      "type": "PostalAddress",
                      "streetAddress": "027 Brakus Knoll",
                      "addressLocality": "East Johnniemouth",
                      "addressRegion": "Arizona",
                      "postalCode": "25780-5840",
                      "addressCountry": "Grenada"
                    },
                    "email": "Kendrick.Spinka57@example.org",
                    "phoneNumber": "555-322-9464",
                    "faxNumber": "555-766-1744"
                  },
                  "credentialSubject": {
                    "type": ["CommercialInvoice"],
                    "portOfEntry": {
                      "type": ["PostalAddress"],
                      "addressLocality": "Seatle",
                      "addressRegion": "Washington",
                      "addressCountry": "USA"
                    },
                    "destinationCountry": "MEX",
                    "purchaseDate": "2021-02-21",
                    "customer": {
                      "type": ["Organization"],
                      "address": {
                        "type": ["PostalAddress"],
                        "organizationName": "Generic Motors of America",
                        "streetAddress": "12 Generic Motors Dr",
                        "addressLocality": "Detroit",
                        "addressRegion": "Michigain",
                        "postalCode": "48232-5170",
                        "addressCountry": "USA"
                      }
                    },
                    "provider": {
                      "type": ["Organization"],
                      "address": {
                        "type": ["PostalAddress"],
                        "organizationName": "Aishi Metal Shinzo Co., Ltd.",
                        "streetAddress": "1651, Shimonakano, Yoshida",
                        "addressLocality": "Tsubame-shi",
                        "addressRegion": "Niigata-ken",
                        "postalCode": "959-0215",
                        "addressCountry": "Japan"
                      }
                    },
                    "totalPaymentDue": {
                      "type": ["PriceSpecification"],
                      "price": 150000,
                      "priceCurrency": "USD"
                    },
                    "merchandise": [
                      {
                        "type": ["Product"],
                        "manufacturer": { "type": ["Organization"] },
                        "description": "UNS S30400 chromium-nickel stainless steel rolls.",
                        "weight": {
                          "type": ["QuantitativeValue"],
                          "unitCode": "lbs",
                          "value": "10000"
                        },
                        "quantity": "5",
                        "priceSpecification": {
                          "type": ["PriceSpecification"],
                          "price": 10000,
                          "priceCurrency": "USD"
                        }
                      },
                      {
                        "type": ["Product"],
                        "manufacturer": { "type": ["Organization"] },
                        "description": "Galvalannealed ASTM A-653 zinc-iron alloy-coated steel sheets.",
                        "weight": {
                          "type": ["QuantitativeValue"],
                          "unitCode": "lbs",
                          "value": "20000"
                        },
                        "quantity": "10",
                        "priceSpecification": {
                          "type": ["PriceSpecification"],
                          "price": 10000,
                          "priceCurrency": "USD"
                        }
                      }
                    ]
                  },
                  "proof": {
                    "type": "Ed25519Signature2018",
                    "created": "2019-12-11T03:50:55Z",
                    "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..0Tzpy6qugNRix_Q7uGym1eAJ4gdBHX3NIbiewuTDsBjRbVi8ppHWxYQuf14knXckIeCyezFoejq_chd2MmVRBw",
                    "proofPurpose": "assertionMethod",
                    "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                  }
                },
                {
                  "@context": [
                    "https://www.w3.org/2018/credentials/v1",
                    "https://w3id.org/traceability/v1"
                  ],
                  "id": "https://example.com/credential/123",
                  "type": ["VerifiableCredential", "BillOfLadingCertificate"],
                  "name": "Bill Of Lading Certificate",
                  "description": "This document includes recommended bill of lading fields.",
                  "relatedLink": [
                    {
                      "type": ["LinkRole"],
                      "target": "did:example:789",
                      "linkRelationship": "commercialInvoiceLink"
                    },
                    {
                      "type": ["LinkRole"],
                      "target": "https://www.example.com/template/123",
                      "linkRelationship": "millTestReportLink"
                    }
                  ],
                  "issuanceDate": "2019-12-11T03:50:55Z",
                  "issuer": {
                    "id": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U",
                    "type": "Organization",
                    "name": "Hauck Group",
                    "description": "Focused secondary synergy",
                    "address": {
                      "type": "PostalAddress",
                      "streetAddress": "3198 O'Kon Wall",
                      "addressLocality": "North Adolphchester",
                      "addressRegion": "Nevada",
                      "postalCode": "50788",
                      "addressCountry": "Cote d'Ivoire"
                    },
                    "email": "Bernita.Quitzon98@example.com",
                    "phoneNumber": "555-171-4411",
                    "faxNumber": "555-758-9761"
                  },
                  "credentialSubject": {
                    "type": ["BillOfLading"],
                    "billOfLadingNumber": "991205182A",
                    "bookingNumber": "991205182",
                    "relatedDocuments": [
                      {
                        "type": ["Purchase"],
                        "customer": {
                          "type": ["Person"],
                          "email": "Deangelo56@example.org",
                          "phoneNumber": "555-208-5866"
                        }
                      }
                    ],
                    "scac": "NISC",
                    "carrier": {
                      "type": ["Organization"],
                      "email": "Adaline29@example.com",
                      "phoneNumber": "+1 555-234-9983"
                    },
                    "consignor": {
                      "type": ["Organization"],
                      "email": "Idella60@example.org",
                      "phoneNumber": "555-953-9479"
                    },
                    "consignee": {
                      "type": ["Organization"],
                      "email": "Victoria.Hane74@example.org",
                      "phoneNumber": "555-455-9053"
                    },
                    "notify": {
                      "type": ["Organization"],
                      "email": "Florida91@example.net",
                      "phoneNumber": "555-104-1126"
                    },
                    "freight": {
                      "type": ["ParcelDelivery"],
                      "deliveryAddress": {
                        "type": ["PostalAddress"],
                        "organizationName": "Goyette Inc",
                        "streetAddress": "3685 Hessel Field",
                        "addressLocality": "North Alexannemouth",
                        "addressRegion": "Kansas",
                        "postalCode": "67998",
                        "addressCountry": "Denmark"
                      },
                      "originAddress": {
                        "type": ["PostalAddress"],
                        "organizationName": "Schaefer, Beer and O'Reilly",
                        "streetAddress": "269 Aaliyah Trafficway",
                        "addressLocality": "Caylaland",
                        "addressRegion": "Maryland",
                        "postalCode": "34283",
                        "addressCountry": "Malta"
                      },
                      "deliveryMethod": "Truck transport",
                      "trackingNumber": "128857427430"
                    },
                    "portOfLoading": { "unLocode": "USMOB" },
                    "portOfDischarge": { "unLocode": "MXATM" }
                  },
                  "proof": {
                    "type": "Ed25519Signature2018",
                    "created": "2019-12-11T03:50:55Z",
                    "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..g9J070BT6vKDscw8nlQ9bSXc9ONbd9gIdtnqZ8d8HWQNYVyK-y6PygSoFOuUP9wdXd8QCQNcZpXI7Rgz_NtuCQ",
                    "proofPurpose": "assertionMethod",
                    "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                  }
                }
              ],
              "holder": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
              "proof": {
                "type": "Ed25519Signature2018",
                "created": "2022-01-09T22:54:46Z",
                "verificationMethod": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                "proofPurpose": "authentication",
                "challenge": "4f9f1d2b-6e04-468e-8d90-59a53113509d",
                "domain": "customs.example.gov",
                "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Eea18HAhNqVjjW78amnBKpKPQUG31_rpZBWgzZF8OeYFeHlWmjuB5rjnBF2VJxASRZzScSq-HAZuPSpVbbrnDw"
              }
            }            
          </pre>
        </section>

        <section class="informative">
          <h3>Step 4: Presentation Acknowledgement</h3>
          <p>A verifier acknowledges workflow they initiated by providing a response in Step 2.</p>
          <pre class="example nohighlight" title="A verifier (US Customs) acknowledges receipt and verifification of critical trade documents from a holder  (Acme Steel Inc.).">
            {
              "verified": true,
              "credentials": {
                "verified": true,
                "results": [
                  {
                    "credentialId": "https://example.com/credential/123",
                    "verified": true,
                    "results": [
                      {
                        "proof": {
                          "@context": [
                            "https://www.w3.org/2018/credentials/v1",
                            "https://w3id.org/traceability/v1"
                          ],
                          "type": "Ed25519Signature2018",
                          "created": "2019-12-11T03:50:55Z",
                          "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..eYAe3tnAYLhfE7tbW6nVUeQclF63oi2Y8JK1Y9U5VTXx4l0Zo1qcsefsZvuwj3AhNZ1OisIwyTD-BccnOiXcBA",
                          "proofPurpose": "assertionMethod",
                          "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                        },
                        "verified": true,
                        "purposeResult": {
                          "valid": true
                        }
                      }
                    ]
                  },
                  {
                    "credentialId": "https://example.com/credential/123",
                    "verified": true,
                    "results": [
                      {
                        "proof": {
                          "@context": [
                            "https://www.w3.org/2018/credentials/v1",
                            "https://w3id.org/traceability/v1"
                          ],
                          "type": "Ed25519Signature2018",
                          "created": "2019-12-11T03:50:55Z",
                          "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..0Tzpy6qugNRix_Q7uGym1eAJ4gdBHX3NIbiewuTDsBjRbVi8ppHWxYQuf14knXckIeCyezFoejq_chd2MmVRBw",
                          "proofPurpose": "assertionMethod",
                          "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                        },
                        "verified": true,
                        "purposeResult": {
                          "valid": true
                        }
                      }
                    ]
                  },
                  {
                    "credentialId": "https://example.com/credential/123",
                    "verified": true,
                    "results": [
                      {
                        "proof": {
                          "@context": [
                            "https://www.w3.org/2018/credentials/v1",
                            "https://w3id.org/traceability/v1"
                          ],
                          "type": "Ed25519Signature2018",
                          "created": "2019-12-11T03:50:55Z",
                          "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..g9J070BT6vKDscw8nlQ9bSXc9ONbd9gIdtnqZ8d8HWQNYVyK-y6PygSoFOuUP9wdXd8QCQNcZpXI7Rgz_NtuCQ",
                          "proofPurpose": "assertionMethod",
                          "verificationMethod": "did:key:z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U#z6MktHQo3fRRohk44dsbE76CuiTpBmyMWq2VVjvV6aBSeE3U"
                        },
                        "verified": true,
                        "purposeResult": {
                          "valid": true
                        }
                      }
                    ]
                  }
                ]
              },
              "presentation": {
                "verified": true,
                "results": [
                  {
                    "proof": {
                      "@context": [
                        "https://www.w3.org/2018/credentials/v1",
                        "https://w3id.org/traceability/v1"
                      ],
                      "type": "Ed25519Signature2018",
                      "created": "2022-01-09T22:54:46Z",
                      "verificationMethod": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                      "proofPurpose": "authentication",
                      "challenge": "4f9f1d2b-6e04-468e-8d90-59a53113509d",
                      "domain": "customs.example.gov",
                      "jws": "eyJhbGciOiJFZERTQSIsImI2NCI6ZmFsc2UsImNyaXQiOlsiYjY0Il19..Eea18HAhNqVjjW78amnBKpKPQUG31_rpZBWgzZF8OeYFeHlWmjuB5rjnBF2VJxASRZzScSq-HAZuPSpVbbrnDw"
                    },
                    "verified": true,
                    "purposeResult": {
                      "valid": true,
                      "controller": {
                        "@context": [
                          "https://www.w3.org/ns/did/v1",
                          "https://w3id.org/security/suites/ed25519-2018/v1",
                          "https://w3id.org/security/suites/x25519-2019/v1"
                        ],
                        "id": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                        "verificationMethod": [
                          {
                            "id": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                            "type": "Ed25519VerificationKey2018",
                            "controller": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                            "publicKeyBase58": "FGBxEzuKWQ911zuvVkzEF8zzi6YqNV97UG5rzSeMoHtQ"
                          },
                          {
                            "id": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6LSt8Cke1XG6vthTpdek9xx6a5NKz8gEuYPQHJPhRjfREAC",
                            "type": "X25519KeyAgreementKey2019",
                            "controller": "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn",
                            "publicKeyBase58": "HT2b7hiQ1UAxNSFtDWSzmyrtUqbZYJNEXJaiCy68hrPS"
                          }
                        ],
                        "assertionMethod": [
                          "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn"
                        ],
                        "authentication": [
                          "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn"
                        ],
                        "capabilityInvocation": [
                          "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn"
                        ],
                        "capabilityDelegation": [
                          "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn"
                        ],
                        "keyAgreement": [
                          "did:key:z6MktiSzqF9kqwdU8VkdBKx56EYzXfpgnNPUAGznpicNiWfn#z6LSt8Cke1XG6vthTpdek9xx6a5NKz8gEuYPQHJPhRjfREAC"
                        ]
                      }
                    }
                  }
                ]
              }
            }            
          </pre>
        </section>
      </section>
    </section>

    <section class="informative">
      <h2>Security and Privacy Considerations</h2>

      <p>
There are a number of security and privacy considerations that implementers
will want to take into consideration when implementing this specification.
      </p>

      <section class="informative">
        <h3>Consideration</h3>

        <p>
TBD
        </p>
      </section>
    </section>

  <section class="appendix informative">
    <h2>Acknowledgements</h2>

    <p>
The Working Group would like to thank the following individuals for reviewing
and providing feedback on the specification (in alphabetical order):
    </p>

    <p>
TBD...
    </p>
  </section>
  </body>
</html>
